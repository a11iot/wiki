<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>
		</title>
		<style type="text/css">
			.csAD577193{text-align:left;text-indent:0pt;margin:24pt 0pt 0pt 0pt;page-break-after:avoid;page-break-inside:avoid}
			.csDE05BCC{color:#4F81BD;background-color:transparent;font-family:Calibri;font-size:16pt;font-weight:bold;font-style:normal;}
			.cs868C439D{text-align:left;text-indent:0pt;margin:10pt 0pt 0pt 0pt;page-break-after:avoid;page-break-inside:avoid}
			.cs83F14626{color:#4F81BD;background-color:transparent;font-family:Microsoft YaHei UI;font-size:14pt;font-weight:bold;font-style:normal;}
			.csB2D98684{color:#4F81BD;background-color:transparent;font-family:Calibri;font-size:14pt;font-weight:bold;font-style:normal;}
			.cs40DD2BC9{text-align:left;text-indent:0pt;margin:9pt 0pt 9pt 0pt}
			.cs3A447A38{text-align:left;text-indent:0pt;margin:0pt 0pt 10pt 0pt}
			.cs9FB05234{color:#000000;background-color:transparent;font-family:Consolas;font-size:11pt;font-weight:normal;font-style:normal;}
			.csD1E291E2{color:#4F81BD;background-color:transparent;font-family:Calibri;font-size:12pt;font-weight:bold;font-style:normal;}
			.csD6CA00D2{color:#4F81BD;background-color:transparent;font-family:Microsoft YaHei UI;font-size:12pt;font-weight:bold;font-style:normal;}
			.cs24C36B3{text-align:left;margin:0pt 0pt 10pt 0pt;list-style-type:disc;color:#000000;background-color:transparent;font-family:Calibri;font-size:12pt;font-weight:normal;font-style:normal}
			.cs8926E06{color:#000000;background-color:transparent;font-family:Calibri;font-size:12pt;font-weight:normal;font-style:normal;}
			.cs9C1B1871{color:#000000;background-color:transparent;font-family:Microsoft YaHei UI;font-size:12pt;font-weight:normal;font-style:normal;}
		</style>
	</head>
	<body>
		<h1 class="csAD577193">
			<a name="c2"><span class="csDE05BCC">C2</span></a></h1>
		<h2 class="cs868C439D">
			<a name="运行-c2-代理"><span class="cs83F14626">运行</span><span class="csB2D98684"> C2 </span><span class="cs83F14626">代理</span></a></h2>
		<p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image0.png" width="560" height="246" alt="" style="border-width:0px;" /></span></p><p class="cs3A447A38"><span class="cs9FB05234">./teamserver [ip address] [password] [profile]</span></p><h3 class="cs868C439D">
			<a name="c2代理的组成部分"><span class="csD1E291E2">C2</span><span class="csD6CA00D2">代理的组成部分</span></a></h3>
		<p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image1.png" width="560" height="340" alt="" style="border-width:0px;" /></span></p><ul style="margin-top:0;margin-bottom:0;">
			<li class="cs24C36B3"><span class="cs8926E06">Options</span></li><li class="cs24C36B3"><span class="cs8926E06">Blocks</span></li><li class="cs24C36B3"><span class="cs8926E06">Extraneous Indicators</span></li><li class="cs24C36B3"><span class="cs8926E06">Transforms</span></li></ul>
		<h2 class="cs868C439D">
			<a name="c2与运转方式"><span class="csB2D98684">C2</span><span class="cs83F14626">与运转方式</span></a></h2>
		<p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image2.png" width="560" height="390" alt="" style="border-width:0px;" /></span></p><ul style="margin-top:0;margin-bottom:0;">
			<li class="cs24C36B3"><span class="cs8926E06">http-get</span><span class="cs9C1B1871">：负责储存加密的信息，同时服务器也会发送数据</span><span class="cs8926E06"> Beacon</span><span class="cs9C1B1871">，因为可以使用</span><span class="cs8926E06">http-get</span><span class="cs9C1B1871">进行服务器输出数据修改。</span></li><li class="cs24C36B3"><span class="cs8926E06">http-post</span><span class="cs9C1B1871">：控制如何将</span><span class="cs8926E06">Beacon</span><span class="cs9C1B1871">发送到其他团队服务器。</span></li><li class="cs24C36B3"><span class="cs8926E06">http-stager</span><span class="cs9C1B1871">：用于转换编码。</span></li><li class="cs24C36B3"><span class="cs8926E06">http-config</span><span class="cs9C1B1871">：自定义配置</span><span class="cs8926E06">http</span><span class="cs9C1B1871">响应数据。</span></li><li class="cs24C36B3"><span class="cs8926E06">http-certificate</span><span class="cs9C1B1871">：配置</span><span class="cs8926E06">SSL</span><span class="cs9C1B1871">证书。</span></li></ul>
		<h2 class="cs868C439D">
			<a name="c2-更改代理设置"><span class="csB2D98684">C2 </span><span class="cs83F14626">更改代理设置</span></a></h2>
		<p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image3.png" width="560" height="379" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span class="cs9C1B1871">可以通过新建监听器的时候，在</span><span class="cs8926E06">Profile</span><span class="cs9C1B1871">里面进行自定义配置。</span></p><h2 class="cs868C439D">
			<a name="c2-自定义配置"><span class="csB2D98684">C2 </span><span class="cs83F14626">自定义配置</span></a></h2>
		<p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image4.png" width="560" height="304" alt="" style="border-width:0px;" /></span></p><p class="cs3A447A38"><span class="cs9FB05234">./c2lint [profile]</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image5.png" width="560" height="166" alt="" style="border-width:0px;" /></span></p><p class="cs3A447A38"><span class="cs9FB05234">pico etumbot.profile</span></p><p class="cs40DD2BC9"><span class="cs9C1B1871">首先打开文件，进行自定义编辑，编辑好后直接运行</span><span class="cs8926E06">./c2lint xxx</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image6.png" width="560" height="306" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image7.png" width="560" height="85" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image8.png" width="560" height="380" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span class="cs9C1B1871">以上是成功运行的全部过程截图。</span><span class="cs8926E06">C2</span><span class="cs9C1B1871">可以通过自定义</span><span class="cs8926E06">POST/GET</span><span class="cs9C1B1871">包的形式，未造成正常使用的数据包来逃逸防火墙的检测。</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image9.png" width="560" height="369" alt="" style="border-width:0px;" /></span></p><h2 class="cs868C439D">
			<a name="c2-运行效果展示"><span class="csB2D98684">C2 </span><span class="cs83F14626">运行效果展示</span></a></h2>
		<p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image10.png" width="560" height="322" alt="" style="border-width:0px;" /></span></p><p class="cs3A447A38"><span class="cs9FB05234">./teamserver [ip] [password] etumbot.profile</span></p><h3 class="cs868C439D">
			<a name="deafault-效果展示"><span class="csD1E291E2">Deafault </span><span class="csD6CA00D2">效果展示</span></a></h3>
		<p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image11.png" width="560" height="458" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image12.png" width="560" height="408" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image13.png" width="560" height="313" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image14.png" width="560" height="449" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image15.png" width="503" height="257" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span class="cs9C1B1871">接下来再</span><span class="cs8926E06">Listener</span><span class="cs9C1B1871">里面配置上线信息，并生成</span><span class="cs8926E06">powershell</span><span class="cs9C1B1871">监听器。</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image16.png" width="560" height="204" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span class="cs9C1B1871">并在</span><span class="cs8926E06">windows</span><span class="cs9C1B1871">客户端运行上线。</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image17.png" width="560" height="322" alt="" style="border-width:0px;" /></span><span class="cs9C1B1871">我们再</span><span class="cs8926E06">Beacon</span><span class="cs9C1B1871">里面，执行一下命令。</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image18.png" width="560" height="250" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span class="cs9C1B1871">如上图所示，上面的</span><span class="cs8926E06">PWD</span><span class="cs9C1B1871">命令被我们未造成了一个普通的数据包。</span></p><h3 class="cs868C439D">
			<a name="get-only-效果展示"><span class="csD1E291E2">Get-only </span><span class="csD6CA00D2">效果展示</span></a></h3>
		<p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image19.png" width="560" height="296" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image20.png" width="560" height="171" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image21.png" width="560" height="213" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image22.png" width="560" height="70" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span class="cs9C1B1871">配置新的</span><span class="cs8926E06">Get-only</span><span class="cs9C1B1871">监视器，并且通过</span><span class="cs8926E06">Spawn</span><span class="cs9C1B1871">进行上线。</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image23.png" width="560" height="275" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span class="cs9C1B1871">我们在</span><span class="cs8926E06">Beacon</span><span class="cs9C1B1871">里面执行</span><span class="cs8926E06">ps</span><span class="cs9C1B1871">命令。</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/CobaltStrike4.0/3._C2/c2_files/image24.png" width="560" height="264" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span class="cs9C1B1871">这里可以看到数据包所展示的是一个</span></p></body>
</html>
