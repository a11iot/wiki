<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>
		</title>
		<style type="text/css">
			.csAD577193{text-align:left;text-indent:0pt;margin:24pt 0pt 0pt 0pt;page-break-after:avoid;page-break-inside:avoid}
			.csDE05BCC{color:#4F81BD;background-color:transparent;font-family:Calibri;font-size:16pt;font-weight:bold;font-style:normal;}
			.csECDA2D3{color:#4F81BD;background-color:transparent;font-family:Microsoft YaHei UI;font-size:16pt;font-weight:bold;font-style:normal;}
			.cs868C439D{text-align:left;text-indent:0pt;margin:10pt 0pt 0pt 0pt;page-break-after:avoid;page-break-inside:avoid}
			.cs83F14626{color:#4F81BD;background-color:transparent;font-family:Microsoft YaHei UI;font-size:14pt;font-weight:bold;font-style:normal;}
			.cs6FD73CFB{text-align:left;text-indent:0pt;margin:5pt 24pt 5pt 24pt}
			.cs9C1B1871{color:#000000;background-color:transparent;font-family:Microsoft YaHei UI;font-size:12pt;font-weight:normal;font-style:normal;}
			.cs8926E06{color:#000000;background-color:transparent;font-family:Calibri;font-size:12pt;font-weight:normal;font-style:normal;}
			.cs40DD2BC9{text-align:left;text-indent:0pt;margin:9pt 0pt 9pt 0pt}
			.cs3A447A38{text-align:left;text-indent:0pt;margin:0pt 0pt 10pt 0pt}
			.cs9FB05234{color:#000000;background-color:transparent;font-family:Consolas;font-size:11pt;font-weight:normal;font-style:normal;}
			.cs7FFD2630{color:#000000;background-color:transparent;font-family:Microsoft JhengHei UI;font-size:11pt;font-weight:normal;font-style:normal;}
		</style>
	</head>
	<body>
		<h1 class="csAD577193">
			<a name="cobalt-strike-探针"><span class="csDE05BCC">Cobalt Strike </span><span class="csECDA2D3">探针</span></a></h1>
		<h2 class="cs868C439D">
			<a name="关于探针"><span class="cs83F14626">关于探针</span></a></h2>
		<p class="cs6FD73CFB"><span class="cs9C1B1871">在开始正式的内容之前</span><span class="cs8926E06">,</span><span class="cs9C1B1871">我们不妨先来大致了解下</span><span class="cs8926E06">,</span><span class="cs9C1B1871">所谓的探针</span><span class="cs8926E06">,</span><span class="cs9C1B1871">到底是个什么东西</span><span class="cs8926E06">,</span><span class="cs9C1B1871">首先</span><span class="cs8926E06">,</span><span class="cs9C1B1871">来假设这么一种场景</span><span class="cs8926E06">,</span><span class="cs9C1B1871">比如</span><span class="cs8926E06">,</span><span class="cs9C1B1871">某天一个小偷想</span><span class="cs8926E06">&quot;</span><span class="cs9C1B1871">光顾</span><span class="cs8926E06">&quot;</span><span class="cs9C1B1871">下你们家</span><span class="cs8926E06">, </span><span class="cs9C1B1871">既然是</span><span class="cs8926E06">&quot;</span><span class="cs9C1B1871">光顾</span><span class="cs8926E06">&quot;</span><span class="cs9C1B1871">那肯定不能选择有人在家的时候下手</span><span class="cs8926E06">,</span><span class="cs9C1B1871">怎么办确定你家到底有没有人在呢</span><span class="cs8926E06">? </span><span class="cs9C1B1871">有个很简单的方式</span><span class="cs8926E06">,</span><span class="cs9C1B1871">比如</span><span class="cs8926E06">,</span><span class="cs9C1B1871">我去按下你家的门铃</span><span class="cs8926E06">,</span><span class="cs9C1B1871">但是按完之后</span><span class="cs8926E06">,</span><span class="cs9C1B1871">我立马就远远躲到某个角落里观察</span><span class="cs8926E06">,</span><span class="cs9C1B1871">听着到底有没有开门的动静儿</span><span class="cs8926E06">,</span><span class="cs9C1B1871">如果有</span><span class="cs8926E06">,</span><span class="cs9C1B1871">则说明此时家里有人</span><span class="cs8926E06">,</span><span class="cs9C1B1871">不太方便下手</span><span class="cs8926E06">,</span><span class="cs9C1B1871">如果陆陆续续敲了几次都发现没人开门</span><span class="cs8926E06">,</span><span class="cs9C1B1871">则说明家里很可能没人</span><span class="cs8926E06">,</span><span class="cs9C1B1871">这个时候下手就比较保险了</span><span class="cs8926E06">,</span><span class="cs9C1B1871">那么这个查点的过程实际上就是</span><span class="cs8926E06">&quot;</span><span class="cs9C1B1871">探针</span><span class="cs8926E06">&quot;</span><span class="cs9C1B1871">的核心作用</span></p><p class="cs6FD73CFB"><span class="cs9C1B1871">此时反过来将这种场景应用到我们实际渗透中</span><span class="cs8926E06">,</span><span class="cs9C1B1871">就很好理解了</span><span class="cs8926E06">,</span><span class="cs9C1B1871">比如</span><span class="cs8926E06">,</span><span class="cs9C1B1871">我现在需要明确的知道目标平时都喜欢用什么系统</span><span class="cs8926E06"> </span><span class="cs9C1B1871">详细版本是多少</span><span class="cs8926E06">[win7,8 or 10],</span><span class="cs9C1B1871">爱用什么浏览器</span><span class="cs8926E06">,</span><span class="cs9C1B1871">常用的办公软件又有哪些</span><span class="cs8926E06">,</span><span class="cs9C1B1871">有没有装</span><span class="cs8926E06">flash,</span><span class="cs9C1B1871">版本又是多少</span><span class="cs8926E06">,</span><span class="cs9C1B1871">再比如</span><span class="cs8926E06">,</span><span class="cs9C1B1871">现在想直接给目标发木马信</span><span class="cs8926E06">,</span><span class="cs9C1B1871">我们是不是需要事先明确知道</span><span class="cs8926E06">,</span><span class="cs9C1B1871">目标系统都用的什么杀软</span><span class="cs8926E06">,</span><span class="cs9C1B1871">这样后期才好针对性的做免杀</span><span class="cs8926E06">,</span><span class="cs9C1B1871">还有目标机器处在什么样的内网</span><span class="cs8926E06">[</span><span class="cs9C1B1871">一看</span><span class="cs8926E06"> 172 </span><span class="cs9C1B1871">的内网段</span><span class="cs8926E06">,</span><span class="cs9C1B1871">极有可能就是在办公内网</span><span class="cs8926E06">],</span><span class="cs9C1B1871">出口</span><span class="cs8926E06"> ip</span><span class="cs9C1B1871">是多少</span><span class="cs8926E06">,</span><span class="cs9C1B1871">等等等</span><span class="cs8926E06">...</span><span class="cs9C1B1871">具体该怎么去拿到上面所说的这些目标信息呢</span><span class="cs8926E06">,</span><span class="cs9C1B1871">一种比较好的方式就是通过探针来搜集</span><span class="cs8926E06">,</span><span class="cs9C1B1871">说白点就是想办法让目标去点一下我们事先精心设计好的一个链接</span><span class="cs8926E06">,</span><span class="cs9C1B1871">通过伪造某个真实的网站链接</span><span class="cs8926E06">,</span><span class="cs9C1B1871">来变相搜集用户敏感信息</span><span class="cs8926E06">,</span><span class="cs9C1B1871">当然啦</span><span class="cs8926E06">,CobaltStrike</span><span class="cs9C1B1871">默认的探针能搜集的信息范围非常有限</span><span class="cs8926E06">,</span><span class="cs9C1B1871">所以如果你是想真正用于实战</span><span class="cs8926E06">,</span><span class="cs9C1B1871">这种东西建议大家最好还是直接自己写</span></p><h2 class="cs868C439D">
			<a name="探针的利用"><span class="cs83F14626">探针的利用</span></a></h2>
		<p class="cs6FD73CFB"><span class="cs9C1B1871">第一步</span><span class="cs8926E06">,</span><span class="cs9C1B1871">先来看看如何利用</span><span class="cs8926E06"> CobaltStrike </span><span class="cs9C1B1871">快速生成一个探针链接</span><span class="cs8926E06">,</span><span class="cs9C1B1871">如下</span><span class="cs8926E06">,</span><span class="cs9C1B1871">端口保持默认</span><span class="cs8926E06">,</span><span class="cs9C1B1871">重定向</span><span class="cs8926E06"> url </span><span class="cs9C1B1871">选择真实网站</span><span class="cs8926E06"> url,</span><span class="cs9C1B1871">本地</span><span class="cs8926E06"> url </span><span class="cs9C1B1871">尽量弄的和真实网站</span><span class="cs8926E06"> url </span><span class="cs9C1B1871">像一点</span><span class="cs8926E06">,</span><span class="cs9C1B1871">总之</span><span class="cs8926E06">,</span><span class="cs9C1B1871">一眼看上去比较有迷惑性才行</span><span class="cs8926E06">,</span><span class="cs9C1B1871">最后</span><span class="cs8926E06">,</span><span class="cs9C1B1871">把最下面的使用</span><span class="cs8926E06"> java applet </span><span class="cs9C1B1871">获取信息也勾上</span><span class="cs8926E06">,</span><span class="cs9C1B1871">因为用</span><span class="cs8926E06"> java </span><span class="cs9C1B1871">获取的稍微更精准一点</span><span class="cs8926E06">,</span><span class="cs9C1B1871">没记错的话</span><span class="cs8926E06">,</span><span class="cs9C1B1871">默认应该是用</span><span class="cs8926E06"> js </span><span class="cs9C1B1871">来获取的</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/Cobalt_Strike_3.x系列教程/Cobalt_Strike_钓鱼攻击/Cobalt%20Strike%20%e6%8e%a2%e9%92%88_files/image0.png" width="560" height="132" alt="" style="border-width:0px;" /></span></p><p class="cs6FD73CFB"><span class="cs9C1B1871">完了之后点击</span><span class="cs8926E06"> &quot;Attacks &quot; -&gt; &quot; Web Drive-by&quot; -&gt; &quot;Manage&quot; </span><span class="cs9C1B1871">便可找到刚刚生成好的探针链接</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/Cobalt_Strike_3.x系列教程/Cobalt_Strike_钓鱼攻击/Cobalt%20Strike%20%e6%8e%a2%e9%92%88_files/image1.png" width="560" height="154" alt="" style="border-width:0px;" /></span></p><p class="cs6FD73CFB"><span class="cs9C1B1871">最终</span><span class="cs8926E06">,</span><span class="cs9C1B1871">生成的探针链接形式大致如下</span><span class="cs8926E06">,</span><span class="cs9C1B1871">由于此处仅为学习</span><span class="cs8926E06">,</span><span class="cs9C1B1871">所以用的直接是</span><span class="cs8926E06"> ip,</span><span class="cs9C1B1871">实战中肯定是要用自己的域名的</span></p><p class="cs3A447A38"><span class="cs9FB05234">http://71.26.83.17/</span></p><p class="cs6FD73CFB"><span class="cs9C1B1871">第二步</span><span class="cs8926E06">,</span><span class="cs9C1B1871">假如你就像现在这样直接把探针链接发给人家</span><span class="cs8926E06">,</span><span class="cs9C1B1871">别人一看肯定就会起疑心</span><span class="cs8926E06">,</span><span class="cs9C1B1871">更别说去点了</span><span class="cs8926E06">,</span><span class="cs9C1B1871">所以需要再用短地址稍微伪装下原本的探针链接才行</span><span class="cs8926E06">,</span><span class="cs9C1B1871">如下</span></p><p class="cs3A447A38"><span class="cs9FB05234">https://bitly.com/ </span><span class="cs7FFD2630">类似的短地址生成站</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">还有非常多</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">大家请自行谷歌</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">境外目标就直接用境外的短地址生成站</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">境内的就直接用境内的一些短地址生成站</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">主要是速度快</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">不会有所察觉</span><span class="cs8926E06"><br/></span><span class="cs9FB05234">https://bit.ly/2VUiklp8</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/Cobalt_Strike_3.x系列教程/Cobalt_Strike_钓鱼攻击/Cobalt%20Strike%20%e6%8e%a2%e9%92%88_files/image2.png" width="560" height="200" alt="" style="border-width:0px;" /></span></p><p class="cs6FD73CFB"><span class="cs9C1B1871">第三步</span><span class="cs8926E06">,</span><span class="cs9C1B1871">就是想尽一切办法潜入目标群组</span><span class="cs8926E06">,twitter,facebook,</span><span class="cs9C1B1871">以及各种</span><span class="cs8926E06"> QQ </span><span class="cs9C1B1871">群</span><span class="cs8926E06">,</span><span class="cs9C1B1871">朋友圈</span><span class="cs8926E06">,</span><span class="cs9C1B1871">站内信或者直接去搜集目标邮箱</span><span class="cs8926E06">,</span><span class="cs9C1B1871">总之</span><span class="cs8926E06">,</span><span class="cs9C1B1871">只要能把探针地址发给目标就行</span><span class="cs8926E06"> [</span><span class="cs9C1B1871">至于具体在实战中如何想办法跟目标搭上线</span><span class="cs8926E06">,</span><span class="cs9C1B1871">不是此处要关注的重点</span><span class="cs8926E06">,</span><span class="cs9C1B1871">也就不多啰嗦了</span><span class="cs8926E06">],</span><span class="cs9C1B1871">当目标一点这个地址</span><span class="cs8926E06">,</span><span class="cs9C1B1871">首先</span><span class="cs8926E06">,</span><span class="cs9C1B1871">它会通过短域名解析到我们自己的探针链接上</span><span class="cs8926E06">,</span><span class="cs9C1B1871">然后在探针链接上可能要停顿个一秒的样子再跳转到真实的网站链接上</span><span class="cs8926E06">,</span><span class="cs9C1B1871">如果此时目标网速够快的话</span><span class="cs8926E06">,</span><span class="cs9C1B1871">停顿的这个过程几乎是不会有太大感觉的</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/Cobalt_Strike_3.x系列教程/Cobalt_Strike_钓鱼攻击/Cobalt%20Strike%20%e6%8e%a2%e9%92%88_files/image3.png" width="560" height="162" alt="" style="border-width:0px;" /></span></p><p class="cs6FD73CFB"><span class="cs9C1B1871">如下便是当目标正常点击了我们发给他的探针之后的效果</span><span class="cs8926E06">,</span><span class="cs9C1B1871">此时通过</span><span class="cs8926E06"> CobaltStrike </span><span class="cs9C1B1871">可以清晰的看到获取的目标客户端的各种信息</span><span class="cs8926E06">,</span><span class="cs9C1B1871">比如</span><span class="cs8926E06">, </span><span class="cs9C1B1871">公网</span><span class="cs8926E06">,</span><span class="cs9C1B1871">内网</span><span class="cs8926E06"> ip [linux </span><span class="cs9C1B1871">系统可以获取到</span><span class="cs8926E06">,windows</span><span class="cs9C1B1871">系统获取的不太准确</span><span class="cs8926E06"> ],</span><span class="cs9C1B1871">以及所用浏览器</span><span class="cs8926E06">,</span><span class="cs9C1B1871">操作系统的</span><span class="cs8926E06"> [ </span><span class="cs9C1B1871">这个识别的也不太准</span><span class="cs8926E06"> ] </span><span class="cs9C1B1871">详细版本</span><span class="cs8926E06">,</span><span class="cs9C1B1871">当然啦</span><span class="cs8926E06">,CobaltStrike </span><span class="cs9C1B1871">本身获取到的信息还是非常有限的</span><span class="cs8926E06">,</span><span class="cs9C1B1871">拿到了这些基础信息之后</span><span class="cs8926E06">,</span><span class="cs9C1B1871">我们便可以开始进一步针对性的调试自己的马以及其它的各种工具</span></p><p class="cs40DD2BC9"><span class="cs8926E06">image</span></p></body>
</html>
